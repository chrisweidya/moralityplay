!function(t){function e(i){if(n[i])return n[i].exports;var a=n[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(exports,t,n){e.o(exports,t)||Object.defineProperty(exports,t,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=34)}([function(t,exports,e){"use strict";const n=e(2);var i=function(t,e,n,i,a,o){this._game=t,this._linkable=this,this._event=e,this._signal=n,this._arg1=i,this._arg2=a,this._arg3=o,this._onClickAnimations=[],this._onMouseOverAnimations=[],this._onMouseOutAnimations=[],this._sound=[]};i.prototype.setAsButton=function(t){t?(this._event.onInputUp.addOnce(this.onTrigger,this),this._event.onInputUp.addOnce(this.removeInput,this)):this._event.onInputUp.add(this.onTrigger,this),this._event.onInputUp.add(this.playSound,this)},i.prototype.setMouseOver=function(){this._event.onInputOver.add(this.playOnMouseOverAnimations,this)},i.prototype.setMouseOut=function(){this._event.onInputOut.add(this.playOnMouseOutAnimations,this)},i.prototype.addOnClickAnimation=function(t){this._onClickAnimations.push(t)},i.prototype.addMouseOverAnimation=function(t){this._onMouseOverAnimations.push(t)},i.prototype.addMouseOutAnimation=function(t){this._onMouseOutAnimations.push(t)},i.prototype.addSound=function(t){this._sound.push(t)},i.prototype.playOnClickAnimations=function(){return i.playAnimations(this._onClickAnimations)},i.prototype.playOnMouseOverAnimations=function(){return i.playAnimations(this._onMouseOverAnimations)},i.prototype.playOnMouseOutAnimations=function(){return i.playAnimations(this._onMouseOutAnimations)},i.playAnimations=function(t){var e=null;return t.forEach(function(t){e=t.start()}),e},i.prototype.playSound=function(){var t=this._game;this._sound.forEach(function(e){t.global.soundManager.playSound(e)})},i.prototype.removeInput=function(){this._event.inputEnabled?this._event.inputEnabled=!1:this._event.parent&&this._event.parent.inputEnabled&&(this._event.parent.inputEnabled=!1),this._event.input&&(this._event.input.useHandCursor=!1)},i.prototype.onTrigger=function(){var t=this._linkable.playOnClickAnimations();t?t.onComplete.add(this.dispatchSignal,this):this.dispatchSignal()},i.prototype.addMouseOverScaleEffect=function(t,e){this._linkable.addMouseOverAnimation(n.scale(t,e,!1,1.03*e.width,1.03*e.height)),this._linkable.setMouseOver(),this._linkable.addMouseOutAnimation(n.scale(t,e,!1,e.width,e.height)),this._linkable.setMouseOut()},i.prototype.dispatchSignal=function(){this._signal.dispatch(this._arg1,this._arg2,this._arg3)},i.goToLink=function(t){window.open(t,"_blank")},i.reload=function(){location.reload()},t.exports=i},function(t,exports,e){"use strict";function n(t,e,n,o,s){f=f.changeSource(t,!1),a(e,o,n),I&&i()}function i(){var t=I.shift();t&&r(t)}function a(t,e,n){function i(){u(_),o(n),e&&h.create(f.video,e),null!=m&&"none"!=m&&g.createOverlay(m)}_=f.addToWorld(0,0,0,0),p.mediaGroup.add(_),f.onChangeSource.addOnce(i,this)}function o(t){t?(f.loop=!1,f.onComplete.addOnce(l(t),this)):f.loop=!0}function s(){p.global.gameManager.getPlaySignal().dispatch(),b=!0,f.video.pause(),p.global.gameManager.getHideUISignal().dispatch(),g.startFilterFade(p.global.gameManager.getTriggerInteractionSignal())}function r(t){var e=setInterval(function(){!f.video.paused&&f.video.currentTime>=t&&(clearInterval(e),s(),i())},p.global.constants.VIDEO_CHECK_INTERVAL)}function l(t){return function(){p.global.gameManager.getChangeSceneSignal().dispatch(t)}}function c(t){f.video.currentTime=t,p.global.gameManager.getShowUISignal().dispatch(),d.play(!1)}function u(t){S?(_.inputEnabled=!0,_.input.useHandCursor=!0,_.events.onInputUp.addOnce(function(){f.play()},this),S=!1):f.play()}const g=e(17),h=(e(0),e(14));var d=null,p=null,f=null,_=null,m=null,I=null,S=!0,b=!1;t.exports={init:function(t){return null!==d?d:(p=t,d=this,f=p.add.video("start","emptyVideo"),f.video.setAttribute("playsinline","playsinline"),g.init(t,f),d)},create:function(t,e,i,a,o,s){t&&(m=i,I=s,n(t,e,a,o,s))},stop:function(){f&&f.stop()},play:function(t){0==t&&(b=t),f&&f.play()},seekTo:function(t){c(t)},paused:function(){if(f)return f.video.paused},isPausedByGame:function(){return b},endFilter:function(t){t||(this.play(!1),p.global.gameManager.getShowUISignal().dispatch()),g.endFilter()},clearFilterBg:function(){g.clearBg()},resetVideoVariables:function(){I=null,b=!1}}},function(t,exports,e){"use strict";var n=function(){};n.scale=function(t,e,n,i,a,o){return o||(o=300),t.add.tween(e).to({width:i,height:a},o,Phaser.Easing.Linear.None,n,0,0)},n.fade=function(t,e,n,i,a){return a||(a=500),t.add.tween(e).to({alpha:n},a,Phaser.Easing.Linear.None,i,0,0,!1)},n.bob=function(t,e,n,i){i||(i=-5),i=i.toString();var a=t.add.tween(e).to({y:i},200,Phaser.Easing.Quadratic.InOut,n,0,-1,!0);return a.repeatDelay(700),a},t.exports=n},function(t,exports,e){"use strict";const n=e(0),i=e(2),a=e(9),o=e(16);var s={Static:"IMAGE_STATIC",ThoughtSprite:"IMAGE_SPRITE_THOUGHT",SceneChange:"IMAGE_BUTTON_SCENECHANGE",DisplayImage:"IMAGE_BUTTON_DISPLAY_IMAGE",InfoImage:"IMAGE_INFO",Thought:"IMAGE_BUTTON_THOUGHT",Transition:"IMAGE_TRANSITION",Background:"IMAGE_BACKGROUND",ChoiceBackground:"IMAGE_CHOICE_BACKGROUND",OverlayCloseImage:"IMAGE_OVERLAY_CLOSE",OverlayScrollBar:"IMAGE_SCROLLBAR",ExternalLink:"IMAGE_BUTTON_EXTERNAL_LINK",Reload:"IMAGE_BUTTON_RELOAD",Button:"IMAGE_BUTTON_GENERIC",Play:"IMAGE_BUTTON_PLAY"},r=function(t,e,n,i){this._type=i,this._xPos=t,this._yPos=e,this._key=n,this._link=null};r.prototype.addImageToGame=function(t,e){switch(this._type){case s.Play:case s.Thought:case s.SceneChange:case s.DisplayImage:case s.ChoiceBackground:case s.OverlayCloseImage:case s.ExternalLink:case s.Reload:case s.Button:this._image=t.add.button(this._xPos,this._yPos,this._key);break;case s.Static:case s.Background:case s.InfoImage:case s.OverlayScrollBar:this._image=t.add.image(this._xPos,this._yPos,this._key);break;case s.ThoughtSprite:this._image=t.add.sprite(this._xPos,this._yPos,this._key)}this.addToGroup(t,e)},r.prototype.addToGroup=function(t,e){e?e.add(this._image):this.addToDefaultGroup(t)},r.prototype.addToDefaultGroup=function(t){switch(this._type){case s.Play:case s.InfoImage:case s.OverlayScrollBar:case s.OverlayCloseImage:case s.Button:t.uiGroup.add(this._image);break;case s.Thought:case s.SceneChange:case s.DisplayImage:case s.ChoiceBackground:case s.ExternalLink:case s.Reload:case s.Static:case s.Background:case s.ThoughtSprite:t.mediaGroup.add(this._image)}},r.prototype.changeImage=function(t,e,n,i,a,o){switch(this._type){case s.Static:this.changeToStaticImage(t);break;case s.Background:this.changeToBgImage(t,e);break;case s.Thought:this.changeToThoughtIcon(t,e,n);break;case s.ThoughtSprite:this.changeToThoughtSprite(t,e,n,i);break;case s.SceneChange:this.changeToSceneChangeImage(t,e,n);break;case s.DisplayImage:this.changeToDisplayImage(t,e,n);break;case s.InfoImage:this.changeToInfoImage(t,e);break;case s.ChoiceBackground:this.changeToChoiceBackgroundImage(t,e,n,i,a,o);break;case s.OverlayCloseImage:this.changeToOverlayCloseImage(t,e,n);break;case s.OverlayScrollBar:this.changeToOverlayScrollBar(t,e,n);break;case s.ExternalLink:this.changeToExternalLinkImage(t,e);break;case s.Reload:this.changeToReloadImage(t,e);break;case s.Play:this.changeToPlayButton(t);break;case s.Button:this.changeToGenericButton(t,e)}},r.prototype.changeToStaticImage=function(t){this._image.anchor.setTo(.5,.5)},r.prototype.changeToBgImage=function(t,e){var n=t.height/this._image.height;this._image.height=Math.floor(this._image.height*n),this._image.width=Math.floor(this._image.width*n),e&&this.makeDraggable(t,!1,!0,-this._image.width+t.width,0,2*this._image.width-t.width,this._image.height).bind(this)},r.prototype.changeToThoughtIcon=function(t,e,a){this._image.width=100,this._image.height=100,this._image.anchor.setTo(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getCreateThoughtsSignal(),e,a,choices),this._link.addOnClickAnimation(i.fade(t,this._image,0,!1)),this._link.setAsButton(!0),i.bob(t,this._image,!0)},r.prototype.changeToThoughtSprite=function(t,e,a,o){this._image.anchor.setTo(.5,.5),this._image.animations.add("think"),this._image.animations.play("think",8,!0),this.enableInput(!0),this._image.input.useHandCursor=!0,this._link=new n(t,this._image.events,t.global.gameManager.getCreateThoughtsSignal(),e,a,o),this._link.addOnClickAnimation(i.fade(t,this._image,0,!1)),this._link.addMouseOverScaleEffect(t,this._image),this._link.setAsButton(!0),i.bob(t,this._image,!0)},r.prototype.changeToSceneChangeImage=function(t,e){this._image.anchor.setTo(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getChangeSceneSignal(),e),this._link.setAsButton(!0),this._link.addSound(t.global.mapping.buttonClickSound),this._link.addMouseOverScaleEffect(t,this._image),i.bob(t,this._image,!0,-1)},r.prototype.changeToDisplayImage=function(t,e,a){this._image.anchor.setTo(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getDisplayImageSignal(),e,a),this._link.setAsButton(!1),this._link.addMouseOverScaleEffect(t,this._image),this._link.addSound(t.global.mapping.buttonClickSound),i.bob(t,this._image,!0)},r.prototype.changeToInfoImage=function(t,e){var n=t.global.constants.INFO_VIEW_MARGIN,i=t.global.constants.INFO_VIEW_WIDTH,s=t.global.constants.INFO_VIEW_HEIGHT,r=i/this._image.width;if(this._image.height=Math.floor(this._image.height*r),this._image.width=Math.floor(this._image.width*r),this._image.x=n,o.checkIfScrollBarNeeded(t,this._image)){this._image.y=n,this._mask=new a(0,0,a.getEnum().Rectangle),this._mask.addGraphicToGame(t,t.uiGroup);var l=a.createRectangle(n,n,i,t.global.constants.INFO_VIEW_HEIGHT);this._mask.changeGraphic(t,l),this._image.mask=this._mask.getGraphic(),this.makeDraggable(t,!0,!1,n,-this._image.height+s+n,i,2*this._image.height-s)}else this._image.y=t.world.centerY,this._image.anchor.setTo(0,.5)},r.prototype.changeToChoiceBackgroundImage=function(t,e,i,a,o,s){return this._image.alpha=0,this._image.anchor.set(.5,.5),this._image.width=e,this._image.height=i,o.bringToTop(),this._link=new n(t,this._image,t.global.gameManager.getEndInteractionSignal(),this,a,s),this._link.setAsButton(!0),this._link.addMouseOverScaleEffect(t,this._image),this._link.addMouseOverScaleEffect(t,o),this._link.addSound(t.global.mapping.buttonClickSound),this._image.input.priorityID=1,this.fadeIn(t),this._image},r.prototype.changeToOverlayCloseImage=function(t){this.setVisible(!1),this._image.anchor.set(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getHideDisplayedImageSignal()),this._link.setAsButton(!1),this._link.addMouseOverScaleEffect(t,this._image),this._link.addSound(t.global.mapping.buttonClickSound),this._link2=new n(t,this._image,t.global.gameManager.getHideInfoOverlaySignal()),this._link2.setAsButton(!1)},r.prototype.changeToOverlayScrollBar=function(t,e){this.setVisible(!1),this._image.width=e-2,this._image.anchor.set(.5,0),this.makeDraggable.call(this,t,!0,!1,t.global.constants.SCROLLBAR_POS[0],t.global.constants.SCROLLBAR_POS[1],t.global.constants.SCROLLBAR_DIM[0]+5,t.global.constants.SCROLLBAR_DIM[1])},r.prototype.changeToExternalLinkImage=function(t,e){this._image.anchor.set(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getGoToLinkSignal(),e),this._link.setAsButton(!0),this._link.addSound(t.global.mapping.buttonClickSound),this._link.addMouseOverScaleEffect(t,this._image)},r.prototype.changeToReloadImage=function(t,e){this._image.anchor.set(.5,.5),this._link=new n(t,this._image,t.global.gameManager.getReloadSignal()),this._link.setAsButton(!0),this._link.addSound(t.global.mapping.buttonClickSound),this._link.addMouseOverScaleEffect(t,this._image)},r.prototype.changeToPlayButton=function(t){this._image.anchor.setTo(.5,.5),this._image.height=300,this._image.width=300},r.prototype.changeToGenericButton=function(t,e){this._link=new n(t,this._image,e),this._link.addSound(t.global.mapping.buttonClickSound),this._link.setAsButton(!1)},r.prototype.changeCursorImage=function(t,e){this._image.events.onInputOver.add(function(){t.canvas.style.cursor=e},this),this._image.events.onInputOut.add(function(){t.canvas.style.cursor="default"},this)},r.prototype.makeDraggable=function(t,e,n,i,a,o,s){if(this.enableInput(!0),void 0!==i&&void 0!==i){var r=new Phaser.Rectangle(i,a,o,s);this._image.input.boundsRect=r}this._image.input.draggable=!0,this._image.input.allowVerticalDrag=!n,this._image.input.allowHorizontalDrag=!e,this.changeCursorImage(t,'url("./Images/UI/hand_2.png"), auto')},r.prototype.destroy=function(){this._image.destroy()},r.prototype.bringToTop=function(){this._image.bringToTop()},r.prototype.getPhaserImage=function(){return this._image},r.prototype.getHeight=function(){return this._image.height},r.prototype.getY=function(){return this._image.y},r.prototype.getType=function(){return this._type},r.prototype.enableInput=function(t){this._image.inputEnabled=t},r.prototype.setX=function(t){this._image.x=t},r.prototype.setY=function(t){this._image.y=t},r.prototype.setPos=function(t,e){this.setX(t),this.setY(e)},r.prototype.setHeight=function(t){this._image.height=t},r.prototype.setVisible=function(t){this._image.visible=t},r.prototype.fadeOut=function(t,e,a){e?(this._link=new n(t,this._image,e,a),this._link.addOnClickAnimation(i.fade(t,this._image,0,!0)),this._link.onTrigger()):i.fade(t,this._image,0,!0)},r.prototype.fadeIn=function(t){i.fade(t,this._image,1,!0)},r.getEnum=function(){return s},t.exports=r},function(t,exports,e){"use strict";const n=e(0),i=e(2);var a={Thoughts:"TEXT_THOUGHTS",Choices:"TEXT_CHOICES",Question:"TEXT_QUESTION",Subtitle:"TEXT_SUBTITLE",InfoOverlayText:"TEXT_INFO_OVERLAY"},o=function(t,e,n,i,a){this._type=i,this._xPos=e,this._yPos=n,this._content=t,this._properties=a,this._text=null};o.prototype.setAdditionalProperties=function(){if(this._properties.lineSpacing&&(this._text.lineSpacing=this._properties.lineSpacing),this._properties.shadow){var t=this._properties.shadow;this._text.setShadow(t[0],t[1],t[2],t[3])}},o.prototype.addTextToGame=function(t,e){this._text=t.add.text(this._xPos,this._yPos,this._content,this._properties),this.setAdditionalProperties(),e.add(this._text)},o.prototype.changeText=function(t,e,n,i,o,s,r){switch(this._type){case a.Thoughts:this.changeToThoughts(t,e,n);break;case a.Choices:this.changeToChoiceText(t,e);break;case a.Question:this.changeToQuestion(t);break;case a.InfoOverlayText:this.changeToInfoOverlayText(t);break;case a.Subtitle:this.changeToSubtitle(t,e)}},o.prototype.changeToThoughts=function(t,e,n){this._text.anchor.setTo(.5),this._text.alpha=0,this.addInterpolationTween(t,e,n),i.fade(t,this._text,1,!0)},o.prototype.changeToChoiceText=function(t,e){this._text.anchor.set(.5,.5),this._text.y=e,this._text.alpha=0,i.fade(t,this._text,1,!0)},o.prototype.changeToQuestion=function(t){this._text.anchor.set(.5,.5),this._text.x=t.width/2,this._text.alpha=0,i.fade(t,this._text,1,!0)},o.prototype.changeToInfoOverlayText=function(t){this._text.anchor.set(.5,.5),this._text.x=t.width/2,this.setVisible(!1)},o.prototype.changeToSubtitle=function(t,e){this._text.anchor.x=.5,this._text.x=t.width/2,this.setVisible(e)},o.prototype.addInterpolationTween=function(t,e,n){var i={x:[this._xPos,this._xPos+(e-this._xPos)/2,e-(e-this._xPos)/8,e],y:[this._yPos,this._yPos-10,n-10,n]};return t.add.tween(this._text).to({x:i.x,y:i.y},1e3,Phaser.Easing.Quadratic.Out,!0,0,0).interpolation(function(t,e){return Phaser.Math.bezierInterpolation(t,e)})},o.prototype.fadeOut=function(t,e,a){e?(this._link=new n(t,this._text.events,e,a),this._link.addOnClickAnimation(i.fade(t,this._text,0,!0)),this._link.onTrigger()):i.fade(t,this._text,0,!0)},o.prototype.enableInput=function(t){this._text.inputEnabled=t},o.prototype.destroy=function(){this._text.destroy()},o.prototype.getPhaserText=function(){return this._text},o.prototype.getHeight=function(){return this._text.height},o.prototype.setVisible=function(t){this._text.visible=t},o.prototype.setY=function(t){this._text.y=t},o.getEnum=function(){return a},t.exports=o},function(t,exports,e){"use strict";function n(){a.mediaGroup=a.add.group(),a.uiGroup=a.add.group()}var i=null,a=null;t.exports={init:function(t){return null!==i?i:(a=t,i=this)},initializeGroups:function(){n()}}},function(t,exports,e){"use strict";function n(t){var e=0;t&&(e=1),r=new i(0,0,i.getEnum().Transition);var n=i.createRectangle(0,0,s.width,s.height,s.global.constants.TRANSITION_COLOR);r.addGraphicToGame(s),r.changeGraphic(s,n,e)}const i=e(9),a=e(17);var o=null,s=null,r=null;t.exports={init:function(t){return null!==o?o:(o=this,s=t,o)},fadeInTransition:function(){a.clearBg(),n(!0)},fadeOutTransition:function(){n(!1)}}},function(t,exports,e){"use strict";function n(){I||(I=new u(10,10,_.global.mapping.pauseButtonImageKey,u.getEnum().Button)),I.addImageToGame(_,_.uiGroup),I.changeImage(_,_.global.gameManager.getPauseSignal())}function i(){b||(b=new u(10,100,_.global.mapping.subtitleButtonImageKey,u.getEnum().Button)),b.addImageToGame(_,_.uiGroup),b.changeImage(_,_.global.gameManager.getToggleSubtitleSignal()),y||(y=new u(10,100,_.global.mapping.subtitleDisabledButtonImageKey,u.getEnum().Button)),y.addImageToGame(_,_.uiGroup),y.changeImage(_,_.global.gameManager.getToggleSubtitleSignal()),p.getSubtitleVisible()?y.setVisible(!1):b.setVisible(!1)}function a(){S||(S=new u(_.world.centerX,_.world.centerY,_.global.mapping.playButtonImageKey,u.getEnum().Play)),S.addImageToGame(_,_.uiGroup),S.changeImage(_),S.setVisible(!1)}function o(){h.paused()||(_.paused=!0,h.stop(),m&&m.setVisible(!0),S&&S.setVisible(!0),_.input.onDown.addOnce(s,self))}function s(){h.isPausedByGame()||(h.play(),_.paused=!1,m.setVisible(!1),S.setVisible(!1))}function r(){T=!1,I.setVisible(T),b.setVisible(T),y.setVisible(T),p.hideSubtitleForMoment()}function l(){T=!0,I.setVisible(T),p.getSubtitleVisible()?b.setVisible(T):y.setVisible(T)}function c(){m=new g(0,0,g.getEnum().Rectangle);var t=g.createRectangle(0,0,_.width,_.height,0,.8);m.addGraphicToGame(_),m.changeGraphic(_,t),m.setVisible(!1),_.uiGroup.add(m.getGraphic())}const u=e(3),g=(e(4),e(9)),h=e(1),d=e(28),p=e(14);var f=null,_=null,m=null,I=null,S=null,b=null,y=null,T=!0,v=!0;t.exports={init:function(t){return null!==f?f:(p.init(t),d.init(t),f=this,_=t,f)},create:function(t,e){T=!0,e&&i(),t&&(n(),c(),a())},pause:function(t){o()},play:function(){s()},showUI:function(){l()},hideUI:function(){r()},toggleSubtitle:function(){v=p.toggleSubtitle(),v?(b.setVisible(!0),y.setVisible(!1)):(b.setVisible(!1),y.setVisible(!0))},createInfoOverlay:function(){d.createOverlay()},showInfoOverlay:function(t){d.setVisible(!0,t)},hideInfoOverlay:function(){d.setVisible(!1)}}},function(t,exports,e){"use strict";var n=function(t){this._scene=t};n.prototype.setStateScene=function(t){this._scene=t},n.prototype.getMovieKey=function(){return this._scene.movieKey},n.prototype.getChoiceMoments=function(){return this._scene.choiceMoments},n.prototype.getTimestamps=function(){for(var t=[],e=0;e<this._scene.choiceMoments.size;e++)t.push(this._scene.choiceMoments.choiceMomentsProperties[e].timeStamp);return t},n.prototype.getThoughtBubble=function(t){return this._scene.choiceMoments.choiceMomentsProperties[t].thoughtBubbles},n.prototype.getChoices=function(t){return this._scene.choiceMoments.choiceMomentsProperties[t].choices},n.prototype.getBgImageKey=function(){return this._scene.bgImageKey},n.prototype.getIconsInfo=function(){return this._scene.icons},n.prototype.getLinkedIconsInfo=function(){return this._scene.linkedIcons},n.prototype.getInputInfo=function(){return this._scene.input},n.prototype.getSrcList=function(){return!(!this._scene.movieReqs||!this._scene.movieSrcArr)&&[this._scene.movieReqs,this._scene.movieSrcArr]},n.prototype.getMovieSrc=function(t,e){if("number"==typeof e){if("HD"==t)return this._scene.movieSrcArr[e][0];if("SD"==t)return this._scene.movieSrcArr[e][1]}else{if("HD"==t)return this._scene.movieSrcHD;if("SD"==t)return this._scene.movieSrcSD}},n.prototype.getSceneReqs=function(){return this._scene.sceneReqs},n.prototype.getSceneTargetNames=function(){return this._scene.sceneTargetNames},n.prototype.getMovieSubKey=function(){return this._scene.sub},n.prototype.getBackgroundMusic=function(){return this._scene.backgroundMusic},n.prototype.getTransitionInfo=function(){return this._scene.transition},n.prototype.getVideoFilter=function(){return this._scene.videoFilter},n.prototype.getNextScenes=function(){return this._scene.nextScene},n.prototype.getDraggable=function(){return this._scene.draggable},t.exports=n},function(t,exports,e){"use strict";const n=e(0),i=e(2);var a={Overlay:"GRAPHIC_INFO_OVERLAY",ScrollBarBackground:"GRAPHIC_SCROLLBAR_BG",Transition:"GRAPHIC_TRANSITION",Rectangle:"GRAPHIC_RECTANGLE"},o=function(t,e,n){this._xPos=t,this._yPos=e,this._type=n};o.prototype.addGraphicToGame=function(t,e){this._graphic=t.add.graphics(this._xPos,this._yPos),this.addToGroup(t,e)},o.prototype.addToGroup=function(t,e){e?e.add(this._graphic):this.addToDefaultGroup(t)},o.prototype.addToDefaultGroup=function(t){switch(this._type){case a.Overlay:case a.ScrollBarBackground:case a.Transition:t.uiGroup.add(this._graphic);break;case a.Rectangle:t.mediaGroup.add(this._graphic)}},o.prototype.changeGraphic=function(t,e,n,i,o,s){switch(this._type){case a.Overlay:this.changeToInfoOverlayGraphic(t,e,n);break;case a.ScrollBarBackground:this.changeToScrollBarBackgroundGraphic(t,e);break;case a.Transition:this.changeToTransitionGraphic(t,e,n);break;case a.Rectangle:this.changeToRectangle(t,e)}},o.prototype.changeToInfoOverlayGraphic=function(t,e){var i=t.global.constants.INFO_VIEW_MARGIN;this._graphic.beginFill(t.global.constants.INFO_OVERLAY_COLOR,t.global.constants.INFO_OVERLAY_OPACITY),this._graphic.inputEnabled=!0,e?(this._graphic.drawRect(0,0,i,t.height),this._graphic.drawRect(t.width-i,0,i,t.height),this._graphic.drawRect(i,0,t.width-(i<<1),i),this._graphic.drawRect(i,t.height-i,t.width-(i<<1),i),this._graphic.input.priorityID=1,this._graphic.input.useHandCursor=!0):this._graphic.drawRect(0,0,t.width,t.height),this._graphic.endFill(),this._graphic.visible=!1,new n(t,this._graphic.events,t.global.gameManager.getHideDisplayedImageSignal()).setAsButton(!1),new n(t,this._graphic.events,t.global.gameManager.getHideInfoOverlaySignal()).setAsButton(!1)},o.prototype.changeToScrollBarBackgroundGraphic=function(t,e){this._graphic.beginFill(e.color,e.opacity),this._graphic.lineStyle(e.strokeWidth,e.lineColor),this._graphic.drawRect(e.x,e.y,e.width,e.height),this._graphic.endFill(),this._graphic.visible=!1},o.prototype.changeToTransitionGraphic=function(t,e,n){this._graphic.beginFill(e.color,e.opacity),this._graphic.drawRect(e.x,e.y,e.width,e.height),this._graphic.endFill(),this._graphic.alpha=n,i.fade(t,this._graphic,1-n,!0)},o.prototype.changeToRectangle=function(t,e){this._graphic.beginFill(e.color,e.opacity),e.strokeWidth&&this._graphic.lineStyle(e.strokeWidth,e.lineColor,e.strokeOpacity),this._graphic.drawRect(e.x,e.y,e.width,e.height),this._graphic.endFill()},o.prototype.setVisible=function(t){this._graphic.visible=t},o.prototype.getGraphic=function(){return this._graphic},o.createRectangle=function(t,e,n,i,a,o,s,r,l){var c={};return c.x=t,c.y=e,c.width=n,c.height=i,a||(a=0),c.color=a,o||(o=1),c.opacity=o,s&&(c.strokeWidth=s,r||(r=0),c.lineColor=r,l||(l=1),c.strokeOpacity=l),c},o.getEnum=function(){return a},t.exports=o},function(t,exports,e){"use strict";function n(t,e){c=new s(0,0,t,g),c.addImageToGame(l,l.mediaGroup),c.changeImage(l,e)}function i(t){u=l.add.group(),l.mediaGroup.add(u),t.forEach(function(t){u.add(t.getPhaserImage())})}function a(){c.getPhaserImage().events.onDragUpdate.add(o),u.x=c.getPhaserImage().x,u.y=c.getPhaserImage().y}function o(){u.x=c.getPhaserImage().x,u.y=c.getPhaserImage().y}const s=e(3);var r=null,l=null,c=null,u=null;const g="IMAGE_BACKGROUND";t.exports={init:function(t){return null!==r?r:(l=t,r=this)},preload:function(){},create:function(t,e){t&&n(t,e)},attachIconsToBg:function(t){i(group),a()}}},function(t,exports,e){"use strict";function n(t){for(var e in t)r.load.audio(e,u[e])}function i(t){for(var e in t)r.load.image(e,t[e])}function a(t){for(var e in t)r.load.spritesheet(e,t[e][0],t[e][1],t[e][2],t[e][3])}function o(t){for(var e in t)r.load.text(e,t[e])}var s=null,r=null,l=null,c=null,u=null,g=null,h=null,d=null,p=null,f=null,_=null;t.exports={init:function(t){return null!==s?s:(s=this,r=t,l=r.cache.getJSON("data"),d=r.cache.getJSON("scenes").scenes,_=r.cache.getJSON("style"),g=l.images,h=l.spritesheets,c=l.videos,u=l.audio,p=l.subtitles,f=l.mapping,s)},preload:function(){i(g),a(h),n(u),o(p)},getScene:function(t){return d[t]},getMapping:function(){return f},getStyle:function(){return _}}},function(t,exports,e){"use strict";var n=function(){};n.VisitAtLeastOnceOfEach=function(t,e){for(var i=!0,a=0;a<e.length;a++)i&=n.OneSceneVisited(t,e[a]);return i},n.OneSceneVisited=function(t,e){if(e)for(var n=0;n<e.length;n++)if(t.global.visitedScenes[e[n]])return!0;return!1},n.AllSceneVisited=function(t,e){if(e){for(var n=0;n<e.length;n++)if(!t.global.visitedScenes[e[n]])return!1;return!0}return!1},n.GetIndexOfVisitedAll=function(t,e){if(e)for(var i=0;i<e.length;i++)if(n.AllSceneVisited(t,e[i]))return i;return!1},t.exports=n},function(t,exports,e){"use strict";function n(t,e,n){n||(n=m.global.mapping.thoughtBubbleImageKey);var i=new p(t[0],t[1],n,p.getEnum().ThoughtSprite);i.addImageToGame(m,m.mediaGroup),i.changeImage(m,e,t)}function i(t){for(var e=0;e<t.size;e++)a(t.key[e],t.coords[e],t.targetImageIndexOrScene[e],t.type[e],e);r(t.lockedByScenes),l(t.unlockedByScenes)}function a(t,e,n,i,a){var o=new p(e[0],e[1],t,i);o.addImageToGame(m,m.mediaGroup),o.changeImage(m,n,a),I.push(o)}function o(t){for(var e=0;e<t.size;e++)s(t.key[e],t.coords[e],t.targetImageIndexOrScene[e],t.type[e]);u()}function s(t,e,n,i){var a=new p(e[0],e[1],t,i);a.addImageToGame(m),a.changeImage(m,n),S.push(a)}function r(t){if(t)for(var e=0;e<t.length;e++){var n=t[e];f.OneSceneVisited(m,n)&&I[e].setVisible(!1)}}function l(t){if(t)for(var e=0;e<t.length;e++){var n=t[e];n&&(f.VisitAtLeastOnceOfEach(m,n)?I[e].setVisible(!0):I[e].setVisible(!1))}}function c(){I.forEach(function(t){t.fadeOut(m)})}function u(){S.forEach(function(t){t.setVisible(!1)})}function g(t,e){d(),h(),y=t,S[y].bringToTop(),S[y].setVisible(!0),b=e,I[b].setVisible(!1),S[y].getType()==p.getEnum().InfoImage&&m.global.gameManager.getShowInfoOverlaySignal().dispatch(S[y])}function h(){null!=b&&I[b].setVisible(!0)}function d(){null!=y&&S[y].setVisible(!1)}const p=e(3),f=e(12);var _=null,m=null,I=[],S=[],b=null,y=null;t.exports={init:function(t){return null!==_?_:(m=t,_=this)},createThoughtIcon:function(t,e,i){n(t,e,i)},createClickableIcons:function(t){return i(t),I},createNavigationIcons:function(t,e){e&&o(e),i(t)},endInteraction:function(){c()},displayIcon:function(t,e){g(t,e)},hideDisplayedIcon:function(){d(),h(),y=null,b=null},destroy:function(){I.forEach(function(t){t.destroy()}),I=[],S.forEach(function(t){t.destroy()}),S=[]}}},function(t,exports,e){"use strict";function n(t,e){i(r(g.cache.getText(e),!0),t)}function i(t,e){t.forEach(function(t){function n(){if(e.currentTime>=t.startTime){e.removeEventListener("timeupdate",n);var i=new c(t.text,0,-500,c.getEnum().Subtitle,g.global.style.subtitleTextProperties);i.addTextToGame(g,g.mediaGroup),i.changeText(g,d);var s=o(i);a(e,t,i,s)}}e.addEventListener("timeupdate",n,!1)})}function a(t,e,n,i){function a(){t.currentTime>=e.endTime&&(t.removeEventListener("timeupdate",a),n.destroy())}t.addEventListener("timeupdate",a,!1)}function o(t){return h[0]&&h[0].setVisible(d),h[0]=t,t.setY(g.global.constants.SUBTITLE_Y_POS),0}function s(){return d=!d,h.forEach(function(t){t&&t.setVisible(d)}),d}function r(t,e){var n=!!e;t=t.replace(/\r/g,"");t=t.split(/(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g),t.shift();for(var i=[],a=0;a<t.length;a+=4)i.push({id:t[a].trim(),startTime:n?l(t[a+1].trim()):t[a+1].trim(),endTime:n?l(t[a+2].trim()):t[a+2].trim(),text:t[a+3].trim()});return i}function l(t){var e=/(\d+):(\d{2}):(\d{2}),(\d{3})/,n=e.exec(t);if(null===n)return 0;for(var i=1;i<5;i++)n[i]=parseInt(n[i],10),isNaN(n[i])&&(n[i]=0);return 3600*n[1]+60*n[2]+n[3]+n[4]/1e3}const c=e(4);var u=null,g=null,h=[null],d=!1;t.exports={init:function(t){return u?u:(u=this,g=t,u)},create:function(t,e){n(t,e)},toggleSubtitle:function(){return s()},hideSubtitleForMoment:function(){h[0].setVisible(!1)},getSubtitleVisible:function(){return d}}},function(t,exports,e){"use strict";function n(t){var e=a.getScene(t);switch(e.stateType){case _.MenuState:case _.InteractState:case _.SwitchState:case _.MovieState:case _.LocationState:p.start(e.stateType,!0,!1,e)}}function i(){p.add(_.MenuState,l),p.add(_.LocationState,c),p.add(_.InteractState,u),p.add(_.SwitchState,g),p.add(_.MovieState,h)}const a=e(11),o=e(5),s=e(6),r=e(7),l=(e(1),e(31)),c=e(19),u=e(18),g=e(33),h=e(32),d=e(14);var p=null,f=null,_={MenuState:"MenuState",InteractState:"InteractState",SwitchState:"SwitchState",MovieState:"MovieState",LocationState:"LocationState"};t.exports={init:function(){return null!==p?p:(p=this.game.state,f=this.game,o.init(f),d.init(this.game),s.init(f),i(),r.init(f),p)},preload:function(){},create:function(){f.global.gameManager.getChangeSceneSignal().dispatch(f.global.mapping.startSceneName)},changeScene:function(t){f.mediaGroup.removeAll(),f.global.visitedScenes[t]=!0,f.global.currentSceneName=t,n(t)}}},function(t,exports,e){"use strict";var n=function(){};n.checkIfScrollBarNeeded=function(t,e){var n=t.global.constants.INFO_VIEW_WIDTH/t.global.constants.INFO_VIEW_HEIGHT;return!(e.width/e.height>n)},t.exports=n},function(t,exports,e){"use strict";function n(t){f=t.add.bitmapData(t.width,t.height),_=t.add.sprite(t.width/2,t.height/2,f),t.mediaGroup.add(_),_.alpha=0,_.anchor.setTo(.5,.5),m=f.context}function i(t){I=t.add.bitmapData(t.width,t.height),S=t.add.sprite(t.width/2,t.height/2,I),S=t.stage.addChildAt(S,0),S.anchor.setTo(.5,.5),b=I.context}function a(t){var e=new c(h,_,t);e.addOnClickAnimation(u.fade(h,_,1,!1)),e.addOnClickAnimation(u.scale(h,_,!1,h.width,h.height)),e.onTrigger()}function o(){u.fade(h,_,0,!0)}function s(){r()}function r(){h.time.events.repeat(h.global.constants.FILTER_REFRESH_INTERVAL,1,r,this),_.alpha>0&&_.alpha<1&&l()}function l(){m.drawImage(p,0,0,d.width,d.height,0,0,h.width,h.height);var t=m.getImageData(0,0,h.width,h.height);b.putImageData(t,0,0);O.forEach(function(e){e[0]in JSManipulate&&(v=JSManipulate[e[0]],e[1]?v.filter(t,e[1]):v.filter(t,v.defaultValues))}),m.putImageData(t,0,0)}const c=e(0),u=e(2);var g=null,h=null,d=null,p=null,f=null,_=null,m=null,I=null,S=null,b=null,y=null,T=null,v=null,O=null;t.exports={init:function(t,e){return null!==g?g:(g=this,h=t,d=e,p=d.video,y=t.canvas,i(h),T=document.createElement("canvas"),T.width=h.width,T.height=h.height,T.context=T.getContext("2d"),g)},createOverlay:function(t){O=t,n(h),s()},clearBg:function(){I&&I.clear()},startFilterFade:function(t){a(t)},endFilter:function(){o()}}},function(t,exports,e){"use strict";function n(){i(),a()}function i(){var t=p.getThoughtBubble(m);if(t)for(var e=0;e<t.size;e++)c.createThoughtIcon(t.coords[e],t.thoughts[e],t.thoughtIconKey[e])}function a(){var t=null;t=p.getChoices(m),g.create(t),m++}function o(t,e,n){_.global.databaseManager.sendInteractionData(_.global.currentSceneName,n),c.endInteraction(),g.endInteraction(t,e),h.endInteraction(),l.endFilter(e)}const s=e(5),r=e(7),l=e(1),c=(e(6),e(13)),u=e(8),g=e(26),h=e(30),d=e(10);var p=null,f=null,_=null,m=null;t.exports={init:function(t){return p&&p.setStateScene(t),m=0,s.initializeGroups(),null!==f?f:(c.init(this.game),h.init(this.game),g.init(this.game),d.init(this.game),l.init(this.game),_=this.game,p=new u(t),f=this)},create:function(){_.global.soundManager.stopBackgroundMusic(),d.create(p.getBgImageKey(),p.getDraggable()),l.create(p.getMovieSrc(_.global.quality),p.getTransitionInfo().fadeOut,p.getVideoFilter(),p.getNextScenes(),p.getMovieSubKey(),p.getTimestamps()),p.getTransitionInfo().fadeIn&&this.game.global.gameManager.getFadeInTransitionSignal().dispatch(),r.create(!0,!0)},shutdown:function(){c.destroy(),l.resetVideoVariables(),h.resetThoughtVariables(),g.resetChoicesVariables()},createInteractionElements:function(){n()},createThoughts:function(t,e){h.create(t,e)},endInteraction:function(t,e,n){o(t,e,n)}}},function(t,exports,e){"use strict";const n=(e(6),e(5)),i=e(8),a=e(7),o=e(10),s=e(13),r=e(1);var l=null,c=null,u=null;t.exports={init:function(t){return null!==c&&c.setStateScene(t),n.initializeGroups(),null!==l?l:(s.init(this.game),o.init(this.game),r.init(this.game),u=this.game,c=new i(t),l=this)},preload:function(){},create:function(){r.clearFilterBg(),u.global.soundManager.playBackgroundMusic(c.getBackgroundMusic()),o.create(c.getBgImageKey(),c.getDraggable()),r.create(c.getMovieSrc(u.global.quality),c.getTransitionInfo().fadeOut,c.getVideoFilter(),c.getNextScenes());var t=s.createNavigationIcons(c.getIconsInfo(),c.getLinkedIconsInfo());c.getDraggable()&&o.attachIconsToBg(t),c.getTransitionInfo().fadeIn&&this.game.global.gameManager.getFadeInTransitionSignal().dispatch(),a.createInfoOverlay()},shutdown:function(){s.destroy(),r.resetVideoVariables()},displayImage:function(t,e){s.displayIcon(t,e)},hideDisplayedImage:function(){s.hideDisplayedIcon()}}},function(t,exports,e){"use_strict";function n(){o(),a(),i(),s.loadFile(g,h,d,p),s.checkConnection()}function i(){u.add.image(u.world.centerX,u.world.centerY,"connectionTestImage").anchor.setTo(.5,.5)}function a(){u.stage.disableVisibilityChange=!0,u.stage.backgroundColor="#ffffff",u.input.maxPointers=1}function o(){u.global={playerName:null,visitedScenes:{}},u.mediaGroup=u.add.group(),u.uiGroup=u.add.group(),u.global.gameManager=new r,u.global.soundManager=new l(u),u.global.databaseManager=new c(u),u.global.constants={},u.global.constants.FILTER_REFRESH_INTERVAL=10,u.global.constants.VIDEO_CHECK_INTERVAL=150,u.global.constants.INFO_VIEW_MARGIN=50,u.global.constants.INFO_VIEW_HEIGHT=u.height-2*u.global.constants.INFO_VIEW_MARGIN,u.global.constants.SCROLLBAR_DIM=[30,u.global.constants.INFO_VIEW_HEIGHT],u.global.constants.INFO_VIEW_WIDTH=u.width-2*u.global.constants.INFO_VIEW_MARGIN-u.global.constants.SCROLLBAR_DIM[0],u.global.constants.SCROLLBAR_POS=[u.width-u.global.constants.INFO_VIEW_MARGIN-u.global.constants.SCROLLBAR_DIM[0],u.global.constants.INFO_VIEW_MARGIN],u.global.constants.SCROLLBAR_STROKEWIDTH=2,u.global.constants.INFO_OVERLAY_COLOR=0,u.global.constants.INFO_OVERLAY_OPACITY=.7,u.global.constants.SCROLLBAR_WHEEL_SENSITIVITY=10,u.global.constants.SUBTITLE_Y_POS=620,u.global.constants.SUBTITLE_SPACING=5,u.global.constants.TRANSITION_COLOR=16777215}const s=e(27),r=e(23),l=e(24),c=e(22);var u=null;const g="pooh",h="./Images/Loading/pooh.jpg",d="IMAGE",p=1576132;WebFontConfig={active:function(){u.time.events.add(Phaser.Timer.SECOND,n,this)},google:{families:["Kadwa","Merienda One","Noto Sans"]}},t.exports={init:function(){return s.init(this.game),u=this.game,null},preload:function(){u.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,u.load.script("webfont","//ajax.googleapis.com/ajax/libs/webfont/1.4.7/webfont.js"),u.load.image("connectionTestImage","./Images/Loading/connectionTestImage.jpg")},create:function(){}}},function(t,exports,e){"use_strict";function n(){var t=(a.add.image(0,0,"progressSceneBackground"),a.add.image(a.world.centerX,a.world.centerY,"progressBarFillBg"));t.anchor.setTo(.5,.5),a.add.image(a.world.centerX,a.world.centerY,"progressBarFrame").anchor.setTo(.5,.5),a.add.image(a.world.centerX,a.world.centerY+80,"progressBarText").anchor.setTo(.5,.5);var e=a.add.sprite((a.width-t.width)/2,(a.height-t.height)/2,"progressBarFillFg");a.load.setPreloadSprite(e)}const i=e(11);var a=null;t.exports={init:function(){return a=this.game,i.init(a),null},preload:function(){n(),i.preload()},create:function(){a.global.style=i.getStyle(),a.global.mapping=i.getMapping(),a.state.start("stateManager")}}},function(t,exports,e){"use strict";var n=null,i="http://mocking-birds.etc.cmu.edu/",a=null,o=function(){return null!==n?n:(n=this,this.createUser(),n)};o.prototype.getUserId=function(){return this.userId},o.prototype.createUser=function(){axios.get(i+"createUser").then(function(t){a=t.data,userInfoActions.setUserId(a)}).catch(void 0)},o.prototype.sendInteractionData=function(t,e){if(void 0!=e&&null!=e){var n={id:a,sceneName:t,interactionType:e};axios.post(i+"addUserAction",n).catch(void 0)}},t.exports=o},function(t,exports,e){"use strict";const n=e(15),i=e(18),a=e(19),o=e(6),s=e(7),r=e(1),l=e(0);var c=null,u=function(){return null!==c?c:(c=this,this._changeSceneSignal=null,this._fadeInTransitionSignal=null,this._fadeOutTransitionSignal=null,this._createThoughtsSignal=null,this._triggerInteractionSignal=null,this._endInteractionSignal=null,this._displayImageSignal=null,this._hideDisplayedImageSignal=null,this._videoSeekSignal=null,this._showUISignal=null,this._hideUISignal=null,this._showInfoOverlaySignal=null,this._hideInfoOverlaySignal=null,this._pauseSignal=null,this._playSignal=null,this._toggleSubtitleSignal=null,this._goToLinkSignal=null,this._reloadSignal=null,this.initSignals(),c)};u.prototype.initSignals=function(){this._changeSceneSignal=new Phaser.Signal,this._changeSceneSignal.add(n.changeScene,this),this._fadeInTransitionSignal=new Phaser.Signal,this._fadeInTransitionSignal.add(o.fadeInTransition,this),this._fadeOutTransitionSignal=new Phaser.Signal,this._fadeOutTransitionSignal.add(o.fadeOutTransition,this),this._createThoughtsSignal=new Phaser.Signal,this._createThoughtsSignal.add(i.createThoughts,this),this._triggerInteractionSignal=new Phaser.Signal,this._triggerInteractionSignal.add(i.createInteractionElements,this),this._endInteractionSignal=new Phaser.Signal,this._endInteractionSignal.add(i.endInteraction,this),this._displayImageSignal=new Phaser.Signal,this._displayImageSignal.add(a.displayImage,this),this._hideDisplayedImageSignal=new Phaser.Signal,this._hideDisplayedImageSignal.add(a.hideDisplayedImage,this),this._videoSeekSignal=new Phaser.Signal,this._videoSeekSignal.add(r.seekTo,this),this._showUISignal=new Phaser.Signal,this._showUISignal.add(s.showUI,this),this._hideUISignal=new Phaser.Signal,this._hideUISignal.add(s.hideUI,this),this._showInfoOverlaySignal=new Phaser.Signal,this._showInfoOverlaySignal.add(s.showInfoOverlay,this),this._hideInfoOverlaySignal=new Phaser.Signal,this._hideInfoOverlaySignal.add(s.hideInfoOverlay,this),this._pauseSignal=new Phaser.Signal,this._pauseSignal.add(s.pause,this),this._playSignal=new Phaser.Signal,this._playSignal.add(s.play,this),this._toggleSubtitleSignal=new Phaser.Signal,this._toggleSubtitleSignal.add(s.toggleSubtitle,this),this._goToLinkSignal=new Phaser.Signal,this._goToLinkSignal.add(l.goToLink,this),this._reloadSignal=new Phaser.Signal,this._reloadSignal.add(l.reload,this)},u.prototype.getChangeSceneSignal=function(){return this._changeSceneSignal},u.prototype.getFadeInTransitionSignal=function(){return this._fadeInTransitionSignal},u.prototype.getFadeOutTransitionSignal=function(){return this._fadeOutTransitionSignal},u.prototype.getTriggerInteractionSignal=function(){return this._triggerInteractionSignal},u.prototype.getEndInteractionSignal=function(){return this._endInteractionSignal},u.prototype.getVideoSeekSignal=function(){return this._videoSeekSignal},u.prototype.getCreateThoughtsSignal=function(){return this._createThoughtsSignal},u.prototype.getDisplayImageSignal=function(){return this._displayImageSignal},u.prototype.getHideDisplayedImageSignal=function(){return this._hideDisplayedImageSignal},u.prototype.getShowUISignal=function(){return this._showUISignal},u.prototype.getHideUISignal=function(){return this._hideUISignal},u.prototype.getShowInfoOverlaySignal=function(){return this._showInfoOverlaySignal},u.prototype.getHideInfoOverlaySignal=function(){return this._hideInfoOverlaySignal},u.prototype.getPauseSignal=function(){return this._pauseSignal},u.prototype.getPlaySignal=function(){return this._playSignal},u.prototype.getToggleSubtitleSignal=function(){return this._toggleSubtitleSignal},u.prototype.getGoToLinkSignal=function(){return this._goToLinkSignal},u.prototype.getReloadSignal=function(){return this._reloadSignal},t.exports=u},function(t,exports,e){"use strict";var n=null,i=null,a=null,o=null,s=null,r=0,l=function(t){return null!==n?n:(n=this,i=t,s={},n)};l.prototype.playSound=function(t){s[t]||(s[t]=i.add.audio(t)),s[t].play()},l.prototype.playBackgroundMusic=function(t){t&&o!=t&&(a&&a.stop(),s[t]||(s[t]=i.add.audio(t)),a=s[t],o=t,a.loop=!0,a.play())},l.prototype.stopBackgroundMusic=function(){a&&(o=null,a.stop())},l.prototype.setCurrentTime=function(t){r=t},t.exports=l},function(t,exports,e){"use strict";var n=(e(0),function(t,e,n,i){this._xPos=e,this._yPos=n,this._content=t,this._properties=i,this._input=null});n.prototype.setDefaultProperties=function(){this._input.font="18px Roboto"},n.prototype.addToGame=function(t){this._input=t.add.inputField(this._xPos,this._yPos,this._properties),this.setDefaultProperties()},n.prototype.getInput=function(){return this._input},t.exports=n},function(t,exports,e){"use strict";function n(t,e,n,i,a,o,s){var r=new h(t,e,d,h.getEnum().ChoiceBackground);return r.addImageToGame(f,f.mediaGroup),r.changeImage(f,n,i,o,a,s),r}function i(t,e){_=new g(t,0,e,g.getEnum().Question,f.global.style.questionTextProperties),_.addTextToGame(f,f.mediaGroup),_.changeText(f,g.getEnum().Question)}function a(t){u(),i(t.question,t.y[0]-t.bounds[0][1]/2-b);for(var e=0;e<t.size;e++)o(e,t),s(e,t),m[e].changeText(f,I[e].getPhaserImage().y,t.size)}function o(t,e){m.push(new g(e.content[t],r(e.size,t),0,g.getEnum().Choices,f.global.style.choicesTextProperties)),m[t].index=t,m[t].addTextToGame(f,f.mediaGroup)}function s(t,e){var i;i=e.targetScene?n(r(e.size,t),e.y[t],e.bounds[t][0],e.bounds[t][1],m[t].getPhaserText(),e.targetScene[t],e.tag[t]):n(r(e.size,t),e.y[t],e.bounds[t][0],e.bounds[t][1],m[t].getPhaserText()),i.index=t,I.push(i)}function r(t,e){if(1==t)return f.world.centerX;if(2==t){if(0==e)return f.width/4;if(1==e)return f.width/4*3}else if(3==t){if(0==e)return f.width/6;if(1==e)return f.world.centerX;if(2==e)return f.width/6*5}return null}function l(t){m.forEach(function(e){e.index!=t&&(e.enableInput(!1),e.fadeOut(f))}),I.forEach(function(e){e.index!=t&&(e.enableInput(!1),e.fadeOut(f))}),_.fadeOut(f)}function c(t,e){function n(){m[t].enableInput(!1),I[t].enableInput(!1),e?m[t].fadeOut(f,f.global.gameManager.getChangeSceneSignal(),e):m[t].fadeOut(f),I[t].fadeOut(f)}f.time.events.add(Phaser.Timer.SECOND*S,n,this)}function u(){m=[],I=[],_=null}const g=e(4),h=e(3),d="choiceBg";var p=null,f=null,_=null,m=[],I=[];const S=1,b=30;t.exports={init:function(t){return null!==p?p:(f=t,p=this)},preload:function(){},create:function(t){a(t)},endInteraction:function(t,e){l(t.index),c(t.index,e)},resetChoicesVariables:function(){u()}}},function(t,exports,e){"use strict";function n(){c.load.onFileComplete.add(a,this),c.load.onLoadStart.add(i,this),c.load.start()}function i(){h=c.time.create(!0),h.start()}function a(){h.stop(),s(o()),c.load.onFileComplete.remove(a,this),c.state.start("preload")}function o(){var t=(h._now-h._started)/1e3;return t+=h.elapsed/1e3,g/t/1e6}function s(t){c.global.quality=t>d||t<0?"HD":"SD"}function r(t,e,n){switch(n){case p.Image:u=c.load.image(t,e);break;case p.Video:u=c.load.text(t,e);break;case p.Audio:u=c.load.audio(t,e)}return u}var l=null,c=null,u=null,g=null,h=null;const d=.36;var p={Image:"IMAGE",Video:"VIDEO",Audio:"AUDIO"};t.exports={init:function(t){return null!==l?l:(u=null,c=t,l=this)},loadFile:function(t,e,n,i){g=i,r(t,e,n)},checkConnection:function(){n()},startPreload:function(){StartPreloadState()}}},function(t,exports,e){"use strict";function n(){i(),r(),l()}function i(){a(),o(),s()}function a(){T=new m(0,0,m.getEnum().Overlay),T.addGraphicToGame(b),T.changeGraphic(b,!0),v=new m(0,0,m.getEnum().Overlay),v.addGraphicToGame(b),v.changeGraphic(b,!1)}function o(){E=new m(0,0,m.getEnum().ScrollBarBackground);var t=m.createRectangle(b.global.constants.SCROLLBAR_POS[0],b.global.constants.SCROLLBAR_POS[1],b.global.constants.SCROLLBAR_DIM[0],b.global.constants.SCROLLBAR_DIM[1],1391461,.8,b.global.constants.SCROLLBAR_STROKEWIDTH,16777215);E.addGraphicToGame(b),E.changeGraphic(b,t)}function s(){k=new _(b.global.constants.SCROLLBAR_POS[0]+b.global.constants.SCROLLBAR_DIM[0]/2,b.global.constants.SCROLLBAR_POS[1],b.global.mapping.overlayScrollBarImageKey,_.getEnum().OverlayScrollBar),k.addImageToGame(b,b.uiGroup),k.changeImage(b,b.global.constants.SCROLLBAR_DIM[0])}function r(){O=new _(50,50,b.global.mapping.overlayCloseButtonImageKey,_.getEnum().OverlayCloseImage),O.addImageToGame(b,b.uiGroup),O.changeImage(b)}function l(){w=new f("Drag the image below to scroll",b.world.centerX,25,f.getEnum().InfoOverlayText,b.global.style.questionTextProperties),w.addTextToGame(b,b.uiGroup),w.changeText(b)}function c(t){y=t,y.setPos(b.global.constants.INFO_VIEW_MARGIN,b.global.constants.INFO_VIEW_MARGIN);var e=b.global.constants.INFO_VIEW_HEIGHT/y.getHeight();k.setHeight(e*b.global.constants.SCROLLBAR_DIM[1]),k.setY(b.global.constants.SCROLLBAR_POS[1]),x=b.global.constants.SCROLLBAR_DIM[1]-k.getHeight(),M=y.getHeight()-b.global.constants.INFO_VIEW_HEIGHT}function u(t){function e(t){var e,n=b.input.mouse.wheelDelta;n>0?(e=k.getY()-b.global.constants.SCROLLBAR_WHEEL_SENSITIVITY)<b.global.constants.INFO_VIEW_MARGIN&&(e=b.global.constants.INFO_VIEW_MARGIN):n<0&&(e=k.getY()+b.global.constants.SCROLLBAR_WHEEL_SENSITIVITY)>x+b.global.constants.INFO_VIEW_MARGIN&&(e=x+b.global.constants.INFO_VIEW_MARGIN),k.setY(e),g()}b.input.mouse.mouseWheelCallback=t?e:null}function g(){y.setY(b.global.constants.INFO_VIEW_MARGIN-(k.getY()-b.global.constants.INFO_VIEW_MARGIN)/x*M)}function h(){k.setY(b.global.constants.INFO_VIEW_MARGIN-(y.getY()-b.global.constants.INFO_VIEW_MARGIN)/M*x)}function d(){k.getPhaserImage().events.onDragUpdate.add(g),y.getPhaserImage().events.onDragUpdate.add(h)}function p(t,e){if(t&&e){O.setVisible(!0);I.checkIfScrollBarNeeded(b,e.getPhaserImage())?(this.initializeScrollbar(e),w.setVisible(!0),T.setVisible(!0),E.setVisible(!0),k.setVisible(!0),u(!0)):v.setVisible(!0),e.bringToTop(),O.bringToTop()}else O.setVisible(!1),w.setVisible(!1),E.setVisible(!1),k.setVisible(!1),T.setVisible(!1),v.setVisible(!1),u(!1)}const f=e(4),_=e(3),m=e(9),I=e(16);var S=null,b=null,y=null,T=null,v=null,O=null,w=null,E=null,k=null,x=0,M=0;t.exports={init:function(t){return null!==S?S:(b=t,S=this)},createOverlay:function(){n()},initializeScrollbar:function(t){c(t),d()},setVisible:function(t,e){p.call(this,t,e)}}},function(t,exports,e){"use strict";var n=null,i=null,a=null,o=e(25);t.exports={init:function(t){return null!==n?n:(i=t,n=this)},preload:function(){},create:function(t){a=[];for(var e=0;e<t.size;e++)a.push(new o(t.name[e],t.coords[e][0],t.coords[e][1],t.properties[e])),a[e].addToGame(i);return a}}},function(t,exports,e){"use strict";const n=e(4);var i=null,a=null,o=[],s=0;t.exports={init:function(t){return null!==i?i:(a=t,i=this)},preload:function(){},create:function(t,e){for(var i=0;i<t.size;i++)o.push(new n(t.content[i],e[0],e[1],n.getEnum().Thoughts,a.global.style.thoughtsTextProperties)),o[s].addTextToGame(a,a.mediaGroup),o[s].changeText(a,t.destination[i][0],t.destination[i][1]),s++},endInteraction:function(){o.forEach(function(t){t.fadeOut(a)})},resetThoughtVariables:function(){o=[],s=0}}},function(t,exports,e){"use strict";const n=e(5),i=e(29),a=(e(6),e(8)),o=e(10),s=e(1),r=e(13);var l=null,c=null,u=null,g=[];t.exports={init:function(t){return null!==c&&c.setStateScene(t),n.initializeGroups(),null!==l?l:(o.init(this.game),r.init(this.game),i.init(this.game),u=this.game,l=this,c=new a(t),l)},preload:function(){},create:function(){g=[];var t=c.getMovieSrc(u.global.quality);t?s.create(t,c.getTransitionInfo().fadeOut,c.getVideoFilter()):o.create(c.getBgImageKey(),c.getDraggable()),r.createClickableIcons(c.getIconsInfo()),u.global.currentSceneName===u.global.mapping.postEndingSceneName&&$("#userInfoModal").modal("show"),c.getTransitionInfo().fadeIn&&this.game.global.gameManager.getFadeInTransitionSignal().dispatch()},shutdown:function(){r.destroy()},update:function(){g.forEach(function(t){t.getInput().update()})}}},function(t,exports,e){"use strict";function n(t){var e=t.getSrcList(),n=null;return e&&(n=l.GetIndexOfVisitedAll(u,e[0])),t.getMovieSrc(u.global.quality,n)}const i=e(5),a=e(7),o=e(1),s=e(8),r=e(10),l=e(12);var c=null,u=null,g=null;t.exports={init:function(t,e){return null!==g&&g.setStateScene(t),i.initializeGroups(),null!==c?c:(o.init(this.game,e),r.init(this.game),g=new s(t),u=this.game,c=this)},preload:function(){},create:function(){u.global.soundManager.stopBackgroundMusic(),r.create(g.getBgImageKey(),g.getDraggable()),o.create(n(g),g.getTransitionInfo().fadeOut,g.getVideoFilter(),g.getNextScenes(),g.getMovieSubKey()),g.getTransitionInfo().fadeIn&&this.game.global.gameManager.getFadeInTransitionSignal().dispatch(),u.global.currentSceneName!==u.global.mapping.startSceneName&&a.create(!0,!0)}}},function(t,exports,e){"use strict";function n(t){var e=t.getSceneReqs(),n=null;return e&&(n=a.GetIndexOfVisitedAll(r,e)),t.getSceneTargetNames()[n]}const i=e(8),a=e(12);var o=null,s=null,r=null;t.exports={init:function(t,e){return null!==s&&s.setStateScene(t),s=new i(t),o=this,r=this.game,o},preload:function(){},create:function(){var t=n(s);r.global.gameManager.getChangeSceneSignal().dispatch(t)}}},function(t,exports,e){"use strict";const n=e(20),i=e(21),a=e(15);e(11);!function(t,e,n,i){function a(){l.canvas.className+="center",l.canvas.id="canvas",l.state.add("boot",t),l.state.add("preload",e),l.state.add("stateManager",n)}function o(){l.load.json("data","json/Data.json"),l.load.json("scenes","json/Scenes.json"),l.load.json("style","json/Style.json"),l.load.image("progressSceneBackground","./Images/Loading/progress_bg.png"),l.load.image("progressBarFillFg","./Images/Loading/progressbar.png"),l.load.image("progressBarFillBg","./Images/Loading/progressbar_bg.png"),l.load.image("progressBarFrame","./Images/Loading/progressbar_frame.png"),l.load.image("progressBarText","./Images/Loading/progressbar_text.png")}function s(){l.state.start("boot")}function r(){}var l=new Phaser.Game(1280,720,Phaser.CANVAS,"",{init:a,preload:o,create:s,update:r})}(n,i,a)}]);